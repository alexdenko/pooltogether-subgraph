enum DrawState {
  Open
  Committed
  Rewarded
}

type Draw @entity {
  id: ID!
  drawId: BigInt!
  feeBeneficiary: Bytes
  secretHash: Bytes
  feeFraction: BigInt
  winner: Bytes
  entropy: Bytes
  winnings: BigInt
  fee: BigInt
  state: DrawState
  poolContract: PoolContract!

  openedAt: BigInt
  committedAt: BigInt
  rewardedAt: BigInt

  balance: BigInt

  winnerEntry: PlayerEntry

  entryIds: [String!]!
  entries: [PlayerEntry!]!
  entriesCount: BigInt!
}

type Player @entity {
  id: ID! 

  entries: [PlayerEntry!] @derivedFrom(field: "player")
}

type Admin @entity {
  id: ID!
  address: Bytes!
  addedAt: BigInt!
  poolContract: PoolContract!
}

type PlayerEntry @entity {
  id: ID!
  drawId: BigInt!
  draw: Draw!
  player: Player
  balance: BigInt!
  sponsorshipBalance: BigInt!
}

type PoolContract @entity {
  id: ID!
  draws: [Draw!]! @derivedFrom(field: "poolContract")
  admins: [Admin!]! @derivedFrom(field: "poolContract")
  drawsCount: BigInt
}